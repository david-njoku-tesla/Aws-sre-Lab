# 1. Création de l'arborescence du lab
mkdir -p ~/aws-sre-lab/{monitoring,scripts,manifests}
cd ~/aws-sre-lab

# 2. Création du docker-compose.yml (Prometheus + Grafana)
cat > docker-compose.yml <<'EOF'
version: '3.8'
services:
  prometheus:
    image: prom/prometheus:latest                 # Image officielle Prometheus
    ports: ["9090:9090"]                           # Prometheus accessible sur le port 9090
    volumes: ["./prometheus.yml:/etc/prometheus/prometheus.yml"]  # Montage du fichier de config
    restart: unless-stopped

  grafana:
    image: grafana/grafana:latest                  # Image officielle Grafana
    ports: ["3000:3000"]                           # Grafana accessible sur le port 3000
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin           # Mot de passe admin (à changer après)
    depends_on: [prometheus]                       # Grafana démarre après Prometheus
    restart: unless-stopped
EOF
